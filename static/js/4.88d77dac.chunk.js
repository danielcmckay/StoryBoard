(this.webpackJsonpstoryboard=this.webpackJsonpstoryboard||[]).push([[4],{71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){},83:function(e,t,r){"use strict";r.r(t);var a=r(11),n=r.n(a),o=r(6),s=r(0),c=r.n(s),i=r(15),u=r(16),l=(r(71),function(e){var t=Object(s.useState)(!1),r=Object(o.a)(t,2),a=r[0],n=r[1],u=Object(s.useContext)(i.a).dark;return c.a.createElement("div",{className:u?"Story Story-dark":"Story"},c.a.createElement("div",{className:"TitleDiv"},c.a.createElement("h2",null,e.title)),c.a.createElement("div",{className:"Description",style:a?{height:"170px"}:{height:"45px"}},c.a.createElement("div",null,"".concat(e.description," "))," ",c.a.createElement("div",{className:"buttons"},c.a.createElement("i",{className:"fas fa-edit",onClick:function(){return e.editStory(e.id)}}),c.a.createElement("i",{className:"fas fa-trash-alt",onClick:function(t){e.deleteStory(e.id)}}),c.a.createElement("i",{className:a?"fas fa-chevron-up":"fas fa-chevron-down",onClick:function(e){n(!a)}}))))}),p=(r(72),function(e){var t=Object(s.useContext)(i.a).dark;return c.a.createElement("div",{className:t?"StoriesContainer StoriesContainer-dark":"StoriesContainer"},c.a.createElement("h1",null,"My Stories"),e.isLoading?c.a.createElement(u.a,null):0===e.stories.length?c.a.createElement("p",null,"Looks like you don't have any stories yet."):e.stories.map((function(t){return c.a.createElement(l,{title:t.title,id:t.id,description:t.description,key:t.id,deleteStory:e.deleteStory,progress:t.progress,editStory:e.editStory,updateProgress:e.updateProgress,isLoading:e.isLoading})})))}),d=r(17),y=r(22),h=(r(73),function(e){var t=Object(s.useState)({title:"",description:"",id:"",progress:!0}),r=Object(o.a)(t,2),a=r[0],n=r[1],u=Object(s.useState)(!1),l=Object(o.a)(u,2),p=l[0],h=l[1],f=function(e){n(Object(y.a)({},a,Object(d.a)({},e.target.name,e.target.value)))};Object(s.useEffect)((function(){void 0!==e.storyToEdit&&h(!0),void 0!==e.storyToEdit&&n(e.storyToEdit)}),[e.storyToEdit]);var m=Object(s.useContext)(i.a).dark;return c.a.createElement("div",{className:m?"NewStoryContainer NewStoryContainer-dark":"NewStoryContainer"},void 0===e.storyToEdit?c.a.createElement("h2",null,"Create a new story"):c.a.createElement("h2",null,"Update story"),c.a.createElement("form",{onSubmit:p?function(t){t.preventDefault(),e.submitEditStory(a),n({title:"",description:"",id:"",progress:!0})}:function(t){t.preventDefault(),e.addStory(a),n({title:"",description:"",id:"",progress:!0})}},c.a.createElement("input",{onChange:f,className:m?"NewStoryInput NewStoryInput-dark":"NewStoryInput",type:"text",name:"title",value:a.title,placeholder:"New story title"}),c.a.createElement("input",{onChange:f,className:m?"NewStoryInput NewStoryInput-dark":"NewStoryInput",type:"text",value:a.description,name:"description",placeholder:"Description"}),c.a.createElement("button",{type:"submit",className:"Button"},p?"Update Story":"Add Story +")))}),f=(r(74),r(10));t.default=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),r=t[0],a=t[1],l=Object(s.useContext)(i.a).dark,d=Object(s.useContext)(f.a),y=Object(s.useState)(),m=Object(o.a)(y,2),v=m[0],b=m[1],S=Object(s.useState)(!1),E=Object(o.a)(S,2),k=E[0],g=E[1],w=function(){var e,t;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,g(!0),r.next=4,n.a.awrap(fetch("".concat("https://storyboard1.herokuapp.com","/api/stories/user/").concat(d.userId),{method:"GET",headers:{Authorization:"Bearer "+d.token}}));case 4:return e=r.sent,r.next=7,n.a.awrap(e.json());case 7:if(void 0!==(t=r.sent).userStories&&a(t.userStories.reverse()),e.ok){r.next=11;break}throw new Error(t.message);case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:g(!1);case 17:case"end":return r.stop()}}),null,null,[[0,13]])};return Object(s.useEffect)((function(){null!==d.userId&&w()}),[d.userId]),c.a.createElement("div",{className:l?"StoryBoard StoryBoard-dark":"StoryBoard"},c.a.createElement("div",{className:"ContentWrapper"},c.a.createElement(p,{stories:r,deleteStory:function(e){var t;return n.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.filter((function(t){return t.id!==e})),o.prev=1,o.next=4,n.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer "+d.token}}));case 4:g(!0),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),console.log(o.t0);case 10:g(!1),a(t);case 12:case"end":return o.stop()}}),null,null,[[1,7]])},id:"StoryContainer",editStory:function(e){var t,r;return n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e),{method:"GET",headers:{Authorization:"Bearer "+d.token}}));case 3:return r=a.sent,a.next=6,n.a.awrap(r.json());case 6:t=a.sent,b(t.story),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])},isLoading:k,updateProgress:function(e){var t;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,r.next=4,n.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d.token},body:JSON.stringify({progress:!1})}));case 4:return t=r.sent,r.next=7,n.a.awrap(t.json());case 7:w(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0);case 13:case"end":return r.stop()}}),null,null,[[1,10]])}}),c.a.createElement(h,{addStory:function(e){var t;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,g(!0),r.next=4,n.a.awrap(fetch("https://storyboard1.herokuapp.com/api/stories/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d.token},body:JSON.stringify({title:e.title,description:e.description,tags:e.tags,creator:d.userId,progress:e.progress})}));case 4:return t=r.sent,r.next=7,n.a.awrap(t.json());case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:g(!1),w();case 14:case"end":return r.stop()}}),null,null,[[0,9]])},storyToEdit:v,submitEditStory:function(e){var t;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d.token},body:JSON.stringify({title:e.title,description:e.description,creator:e.creator})}));case 3:return t=r.sent,r.next=6,n.a.awrap(t.json());case 6:w(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}},k&&c.a.createElement(u.a,null))))}}}]);
//# sourceMappingURL=4.88d77dac.chunk.js.map