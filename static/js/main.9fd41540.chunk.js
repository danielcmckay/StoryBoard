(this.webpackJsonpstoryboard=this.webpackJsonpstoryboard||[]).push([[0],{20:function(e,t,a){},27:function(e,t,a){e.exports=a(77)},32:function(e,t,a){},33:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},71:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),s=a(22),c=a.n(s),i=(a(32),a(4)),l=(a(33),a(1)),u=a.n(l),d=Object(r.createContext)(!1),m=a(23),p=function(e){return o.a.createElement(m.SyncLoader,{color:"#ff5555",size:15,loading:e.isLoading})},f=(a(59),function(e){var t=Object(r.useState)(!1),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useContext)(d).dark;return o.a.createElement("div",{className:c?"Story Story-dark":"Story"},o.a.createElement("div",{className:"TitleDiv"},o.a.createElement("h2",null,e.title)),o.a.createElement("div",{className:"Description",style:n?{height:"170px"}:{height:"45px"}},o.a.createElement("div",null,"".concat(e.description," "))," ",o.a.createElement("div",{className:"buttons"},o.a.createElement("i",{className:"fas fa-edit",onClick:function(){return e.editStory(e.id)}}),o.a.createElement("i",{className:"fas fa-trash-alt",onClick:function(t){e.deleteStory(e.id)}}),o.a.createElement("i",{className:n?"fas fa-chevron-up":"fas fa-chevron-down",onClick:function(e){s(!n)}}))))}),g=(a(60),function(e){var t=Object(r.useContext)(d).dark;return o.a.createElement("div",{className:t?"StoriesContainer StoriesContainer-dark":"StoriesContainer"},o.a.createElement("h1",null,"My Stories"),e.isLoading?o.a.createElement(p,null):0===e.stories.length?o.a.createElement("p",null,"Looks like you don't have any stories yet."):e.stories.map((function(t){return o.a.createElement(f,{title:t.title,id:t.id,description:t.description,key:t.id,deleteStory:e.deleteStory,progress:t.progress,editStory:e.editStory,updateProgress:e.updateProgress,isLoading:e.isLoading})})))}),h=a(12),E=a(15),b=(a(61),function(e){var t=Object(r.useState)({title:"",description:"",id:"",progress:!0}),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useState)(!1),l=Object(i.a)(c,2),u=l[0],m=l[1],p=function(e){s(Object(E.a)({},n,Object(h.a)({},e.target.name,e.target.value)))};Object(r.useEffect)((function(){void 0!==e.storyToEdit&&m(!0),void 0!==e.storyToEdit&&s(e.storyToEdit)}),[e.storyToEdit]);var f=Object(r.useContext)(d).dark;return o.a.createElement("div",{className:f?"NewStoryContainer NewStoryContainer-dark":"NewStoryContainer"},void 0===e.storyToEdit?o.a.createElement("h2",null,"Create a new story"):o.a.createElement("h2",null,"Update story"),o.a.createElement("form",{onSubmit:u?function(t){t.preventDefault(),e.submitEditStory(n),s({title:"",description:"",id:"",progress:!0})}:function(t){t.preventDefault(),e.addStory(n),s({title:"",description:"",id:"",progress:!0})}},o.a.createElement("input",{onChange:p,className:f?"NewStoryInput NewStoryInput-dark":"NewStoryInput",type:"text",name:"title",value:n.title,placeholder:"New story title"}),o.a.createElement("input",{onChange:p,className:f?"NewStoryInput NewStoryInput-dark":"NewStoryInput",type:"text",value:n.description,name:"description",placeholder:"Description"}),o.a.createElement("button",{type:"submit",className:"Button"},u?"Update Story":"Add Story +")))}),v=(a(62),Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})),y=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],s=Object(r.useContext)(d).dark,c=Object(r.useContext)(v),l=Object(r.useState)(),m=Object(i.a)(l,2),f=m[0],h=m[1],E=Object(r.useState)(!1),y=Object(i.a)(E,2),S=y[0],k=y[1],w=function(){var e,t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,k(!0),a.next=4,u.a.awrap(fetch("".concat("https://storyboard1.herokuapp.com","/api/stories/user/").concat(c.userId),{method:"GET",headers:{Authorization:"Bearer "+c.token}}));case 4:return e=a.sent,a.next=7,u.a.awrap(e.json());case 7:if(void 0!==(t=a.sent).userStories&&n(t.userStories.reverse()),e.ok){a.next=11;break}throw new Error(t.message);case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0);case 16:k(!1);case 17:case"end":return a.stop()}}),null,null,[[0,13]])};return Object(r.useEffect)((function(){null!==c.userId&&w()}),[c.userId]),o.a.createElement("div",{className:s?"StoryBoard StoryBoard-dark":"StoryBoard"},o.a.createElement("div",{className:"ContentWrapper"},o.a.createElement(g,{stories:a,deleteStory:function(e){var t;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.filter((function(t){return t.id!==e})),r.prev=1,r.next=4,u.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer "+c.token}}));case 4:k(!0),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(1),console.log(r.t0);case 10:k(!1),n(t);case 12:case"end":return r.stop()}}),null,null,[[1,7]])},id:"StoryContainer",editStory:function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e),{method:"GET",headers:{Authorization:"Bearer "+c.token}}));case 3:return a=n.sent,n.next=6,u.a.awrap(a.json());case 6:t=n.sent,h(t.story),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),null,null,[[0,10]])},isLoading:S,updateProgress:function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.prev=1,a.next=4,u.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:JSON.stringify({progress:!1})}));case 4:return t=a.sent,a.next=7,u.a.awrap(t.json());case 7:w(),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0);case 13:case"end":return a.stop()}}),null,null,[[1,10]])}}),o.a.createElement(b,{addStory:function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,k(!0),a.next=4,u.a.awrap(fetch("https://storyboard1.herokuapp.com/api/stories/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:JSON.stringify({title:e.title,description:e.description,tags:e.tags,creator:c.userId,progress:e.progress})}));case 4:return t=a.sent,a.next=7,u.a.awrap(t.json());case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:k(!1),w();case 14:case"end":return a.stop()}}),null,null,[[0,9]])},storyToEdit:f,submitEditStory:function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.awrap(fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:JSON.stringify({title:e.title,description:e.description,creator:e.creator})}));case 3:return t=a.sent,a.next=6,u.a.awrap(t.json());case 6:w(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),null,null,[[0,9]])}},S&&o.a.createElement(p,null))))},S=(a(20),a(63),function(e){return o.a.createElement("button",{className:"Button ".concat(e.classes),onClick:e.onClick},e.children)}),k=(a(64),function(e){return o.a.createElement("div",{className:"ErrorModal"},e.message)}),w=function(){var e=Object(r.useState)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}}),t=Object(i.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(!0),c=Object(i.a)(s,2),l=c[0],d=c[1],m=Object(r.useState)(!1),f=Object(i.a)(m,2),g=f[0],b=f[1],y=Object(r.useState)(!0),w=Object(i.a)(y,2),j=w[0],O=w[1],N=function(e){n(Object(E.a)({},a,Object(h.a)({},e.target.name,e.target.value)))},x=Object(r.useContext)(v);return o.a.createElement("div",{className:"Login"},g?o.a.createElement(p,{loading:!0}):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"Title"},o.a.createElement("h1",null,"StoryBoard"),o.a.createElement("span",{className:"title-decoration-wrapper"},o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}))),o.a.createElement("p",null,"Because keeping track of ideas should be easy."),o.a.createElement("form",{onSubmit:function(e){var t,n,r,o;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.preventDefault(),b(!0),!l){s.next=22;break}return s.prev=3,s.next=6,u.a.awrap(fetch("https://storyboard1.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}));case 6:return t=s.sent,s.next=9,u.a.awrap(t.json());case 9:if(n=s.sent,t.ok){s.next=13;break}throw b(!1),new Error(n.message);case 13:b(!1),x.login(n.userId,n.token),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),O(s.t0.message||"Something went wrong!");case 20:s.next=40;break;case 22:return s.prev=22,s.next=25,u.a.awrap(fetch("https://storyboard1.herokuapp.com/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}));case 25:return r=s.sent,s.next=28,u.a.awrap(r.json());case 28:if(o=s.sent,r.ok){s.next=32;break}throw b(!1),new Error(o.message);case 32:b(!1),x.login(o.userId,o.token),s.next=40;break;case 36:s.prev=36,s.t1=s.catch(22),O(s.t1.message||"Something went wrong!"),console.log(s.t1);case 40:case"end":return s.stop()}}),null,null,[[3,17],[22,36]])}},o.a.createElement("span",null,o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",name:"email",placeholder:"jdoe@gmail.com",onChange:N})),o.a.createElement("span",null,o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:N})),o.a.createElement(S,{type:"submit"},l?"Login":"Sign up")," "),o.a.createElement(S,{type:"button",classes:"LoginBtn LoginBtnAlt",onClick:function(){d(!l)}},l?"Not a user? Sign up!":"Already a user? Login"),j&&o.a.createElement(k,{message:j})))},j=(a(65),a(14)),O=function(){var e=Object(r.useContext)(d).dark,t=Object(r.useContext)(v).logout;return o.a.createElement("nav",{className:e?"Nav Nav-dark":"Nav"},o.a.createElement("span",{className:"TitleSpan"},o.a.createElement(j.b,{to:"/"},o.a.createElement("h1",null,"StoryBoard")),o.a.createElement("span",{className:"title-decoration-wrapper"},o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}))),o.a.createElement("ul",{className:"NavList"},o.a.createElement("li",{className:"NavItem"},o.a.createElement(j.b,{to:"/settings"},"Settings")),o.a.createElement("li",{className:"NavItem",onClick:function(e){t()}},"Logout")))},N=(a(71),a(26)),x=a.n(N),C=(a(76),function(){var e=Object(r.useContext)(d),t=e.dark,a=e.setDark;return o.a.createElement("div",{className:t?"Settings Settings-dark":"Settings"},o.a.createElement("div",{className:"SettingsWrapper"},o.a.createElement("span",null,"Set dark/light theme: ",o.a.createElement(x.a,{className:"Toggle",onChange:function(){a(!t),window.localStorage.setItem("darkTheme",!t)},checked:t})),o.a.createElement(S,{onClick:function(){a(!1),window.localStorage.setItem("darkTheme",!1)}},"Reset")))}),T=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],s=Object(r.useState)(),c=Object(i.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)("5e6017d4a9835a614b38b026"),m=Object(i.a)(d,2),p=m[0],f=m[1],g=Object(r.useCallback)((function(e,t,a){o(t),f(e);var n=a||new Date((new Date).getTime()+36e5);u(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),h=Object(r.useCallback)((function(){o(null),f(null),u(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&l){var e=l.getTime()-(new Date).getTime();n=setTimeout(h,e)}else clearTimeout(n)}),[a,h,l]),Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&(o(e.token),f(e.userId))}),[]),{userId:p,token:a,login:g,logout:h}},I=a(9),B=function(){var e,t=T(),a=t.userId,n=t.token,s=t.login,c=t.logout,l=Object(r.useState)(),u=Object(i.a)(l,2),m=u[0],p=u[1];return Object(r.useEffect)((function(){window.localStorage.getItem("darkTheme")?"true"===window.localStorage.getItem("darkTheme")&&p(!0):window.localStorage.setItem("darkTheme","false")}),[]),e=n?o.a.createElement(d.Provider,{value:{dark:m,setDark:p}},o.a.createElement(O,null),o.a.createElement(I.b,{path:"/",exact:!0},o.a.createElement(y,null)),o.a.createElement(I.b,{path:"/settings",exact:!0},o.a.createElement(C,null)),o.a.createElement(I.a,{to:"/"})):o.a.createElement(I.b,{path:"/",exact:!0},o.a.createElement(w,null)),o.a.createElement("div",{className:"App"},o.a.createElement(v.Provider,{value:{isLoggedIn:!!n,token:n,login:s,logout:c,userId:a}},o.a.createElement(j.a,null,o.a.createElement(I.d,null,e))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.9fd41540.chunk.js.map