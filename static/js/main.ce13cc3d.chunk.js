(this.webpackJsonpstoryboard=this.webpackJsonpstoryboard||[]).push([[0],{21:function(e,t,a){},28:function(e,t,a){e.exports=a(78)},33:function(e,t,a){},34:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},72:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(23),s=a.n(c),i=(a(33),a(3)),l=(a(34),a(5)),u=a.n(l),d=a(9),m=Object(r.createContext)(!1),p=a(24),f=function(e){return o.a.createElement(p.SyncLoader,{color:"#ff5555",size:15,loading:e.isLoading})},h=(a(60),function(e){var t=Object(r.useState)(!1),a=Object(i.a)(t,2),n=a[0],c=a[1],s=Object(r.useContext)(m).dark;return o.a.createElement("div",{className:s?"Story Story-dark":"Story"},o.a.createElement("div",{className:"TitleDiv"},o.a.createElement("h2",null,e.title)),o.a.createElement("div",{className:"Description",style:n?{height:"170px"}:{height:"45px"}},o.a.createElement("div",null,"".concat(e.description," "))," ",o.a.createElement("div",{className:"buttons"},o.a.createElement("i",{className:"fas fa-edit",onClick:function(){return e.editStory(e.id)}}),o.a.createElement("i",{className:"fas fa-trash-alt",onClick:function(t){e.deleteStory(e.id)}}),o.a.createElement("i",{className:n?"fas fa-chevron-up":"fas fa-chevron-down",onClick:function(e){c(!n)}}))))}),g=(a(61),function(e){var t=Object(r.useContext)(m).dark;return o.a.createElement("div",{className:t?"StoriesContainer StoriesContainer-dark":"StoriesContainer"},o.a.createElement("h1",null,"My Stories"),e.isLoading?o.a.createElement(f,null):0===e.stories.length?o.a.createElement("p",null,"Looks like you don't have any stories yet."):e.stories.map((function(t){return o.a.createElement(h,{title:t.title,id:t.id,description:t.description,key:t.id,deleteStory:e.deleteStory,progress:t.progress,editStory:e.editStory,updateProgress:e.updateProgress,isLoading:e.isLoading})})))}),b=a(13),v=a(16),E=(a(62),function(e){var t=Object(r.useState)({title:"",description:"",id:"",progress:!0}),a=Object(i.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),l=Object(i.a)(s,2),u=l[0],d=l[1],p=function(e){c(Object(v.a)({},n,Object(b.a)({},e.target.name,e.target.value)))};Object(r.useEffect)((function(){void 0!==e.storyToEdit&&d(!0),void 0!==e.storyToEdit&&c(e.storyToEdit)}),[e.storyToEdit]);var f=Object(r.useContext)(m).dark;return o.a.createElement("div",{className:f?"NewStoryContainer NewStoryContainer-dark":"NewStoryContainer"},void 0===e.storyToEdit?o.a.createElement("h2",null,"Create a new story"):o.a.createElement("h2",null,"Update story"),o.a.createElement("form",{onSubmit:u?function(t){t.preventDefault(),e.submitEditStory(n),c({title:"",description:"",id:"",progress:!0})}:function(t){t.preventDefault(),e.addStory(n),c({title:"",description:"",id:"",progress:!0})}},o.a.createElement("input",{onChange:p,className:f?"NewStoryInput NewStoryInput-dark":"NewStoryInput",type:"text",name:"title",value:n.title,placeholder:"New story title"}),o.a.createElement("input",{onChange:p,className:f?"NewStoryInput NewStoryInput-dark":"NewStoryInput",type:"text",value:n.description,name:"description",placeholder:"Description"}),o.a.createElement("button",{type:"submit",className:"Button"},u?"Update Story":"Add Story +")))}),y=(a(63),Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})),k=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(m).dark,s=Object(r.useContext)(y),l=Object(r.useState)(),p=Object(i.a)(l,2),h=p[0],b=p[1],v=Object(r.useState)(!1),k=Object(i.a)(v,2),S=k[0],w=k[1],j=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,fetch("".concat("https://storyboard1.herokuapp.com","/api/stories/user/").concat(s.userId),{method:"GET",headers:{Authorization:"Bearer "+s.token}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(void 0!==(a=e.sent).userStories&&n(a.userStories.reverse()),t.ok){e.next=11;break}throw new Error(a.message);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:w(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,fetch("https://storyboard1.herokuapp.com/api/stories/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s.token},body:JSON.stringify({title:t.title,description:t.description,tags:t.tags,creator:s.userId,progress:t.progress})});case 4:return a=e.sent,e.next=7,a.json();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:w(!1),j();case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.filter((function(e){return e.id!==t})),e.prev=1,e.next=4,fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer "+s.token}});case 4:w(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:w(!1),n(r);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(t),{method:"GET",headers:{Authorization:"Bearer "+s.token}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,b(a.story),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s.token},body:JSON.stringify({title:t.title,description:t.description,creator:t.creator})});case 3:return a=e.sent,e.next=6,a.json();case 6:j(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,fetch("https://storyboard1.herokuapp.com"+"/api/stories/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s.token},body:JSON.stringify({progress:!1})});case 4:return a=e.sent,e.next=7,a.json();case 7:j(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){null!==s.userId&&j()}),[s.userId]),o.a.createElement("div",{className:c?"StoryBoard StoryBoard-dark":"StoryBoard"},o.a.createElement("div",{className:"ContentWrapper"},o.a.createElement(g,{stories:a,deleteStory:N,id:"StoryContainer",editStory:x,isLoading:S,updateProgress:T}),o.a.createElement(E,{addStory:O,storyToEdit:h,submitEditStory:C},S&&o.a.createElement(f,null))))},S=(a(21),a(64),function(e){return o.a.createElement("button",{className:"Button ".concat(e.classes),onClick:e.onClick},e.children)}),w=(a(65),function(e){return o.a.createElement("div",{className:"ErrorModal"},e.message)}),j=function(){var e=Object(r.useState)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}}),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!0),s=Object(i.a)(c,2),l=s[0],m=s[1],p=Object(r.useState)(!1),h=Object(i.a)(p,2),g=h[0],E=h[1],k=Object(r.useState)(!0),j=Object(i.a)(k,2),O=j[0],N=j[1],x=function(e){n(Object(v.a)({},a,Object(b.a)({},e.target.name,e.target.value)))},C=Object(r.useContext)(y),T=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E(!0),!l){e.next=22;break}return e.prev=3,e.next=6,fetch("https://storyboard1.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})});case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,n.ok){e.next=13;break}throw E(!1),new Error(r.message);case 13:E(!1),C.login(r.userId,r.token),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),N(e.t0.message||"Something went wrong!");case 20:e.next=40;break;case 22:return e.prev=22,e.next=25,fetch("https://storyboard1.herokuapp.com/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})});case 25:return o=e.sent,e.next=28,o.json();case 28:if(c=e.sent,o.ok){e.next=32;break}throw E(!1),new Error(c.message);case 32:E(!1),C.login(c.userId,c.token),e.next=40;break;case 36:e.prev=36,e.t1=e.catch(22),N(e.t1.message||"Something went wrong!"),console.log(e.t1);case 40:case"end":return e.stop()}}),e,null,[[3,17],[22,36]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"Login"},g?o.a.createElement(f,{loading:!0}):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"Title"},o.a.createElement("h1",null,"StoryBoard"),o.a.createElement("span",{className:"title-decoration-wrapper"},o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}))),o.a.createElement("p",null,"Because keeping track of ideas should be easy."),o.a.createElement("form",{onSubmit:T},o.a.createElement("span",null,o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",name:"email",placeholder:"jdoe@gmail.com",onChange:x})),o.a.createElement("span",null,o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:x})),o.a.createElement(S,{type:"submit"},l?"Login":"Sign up")," "),o.a.createElement(S,{type:"button",classes:"LoginBtn LoginBtnAlt",onClick:function(){m(!l)}},l?"Not a user? Sign up!":"Already a user? Login"),O&&o.a.createElement(w,{message:O})))},O=(a(66),a(15)),N=function(){var e=Object(r.useContext)(m).dark,t=Object(r.useContext)(y).logout;return o.a.createElement("nav",{className:e?"Nav Nav-dark":"Nav"},o.a.createElement("span",{className:"TitleSpan"},o.a.createElement(O.b,{to:"/"},o.a.createElement("h1",null,"StoryBoard")),o.a.createElement("span",{className:"title-decoration-wrapper"},o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}))),o.a.createElement("ul",{className:"NavList"},o.a.createElement("li",{className:"NavItem"},o.a.createElement(O.b,{to:"/settings"},"Settings")),o.a.createElement("li",{className:"NavItem",onClick:function(e){t()}},"Logout")))},x=(a(72),a(27)),C=a.n(x),T=(a(77),function(){var e=Object(r.useContext)(m),t=e.dark,a=e.setDark;return o.a.createElement("div",{className:t?"Settings Settings-dark":"Settings"},o.a.createElement("div",{className:"SettingsWrapper"},o.a.createElement("span",null,"Set dark/light theme: ",o.a.createElement(C.a,{className:"Toggle",onChange:function(){a(!t),window.localStorage.setItem("darkTheme",!t)},checked:t})),o.a.createElement(S,{onClick:function(){a(!1),window.localStorage.setItem("darkTheme",!1)}},"Reset")))}),I=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)(),s=Object(i.a)(c,2),l=s[0],u=s[1],d=Object(r.useState)("5e6017d4a9835a614b38b026"),m=Object(i.a)(d,2),p=m[0],f=m[1],h=Object(r.useCallback)((function(e,t,a){o(t),f(e);var n=a||new Date((new Date).getTime()+36e5);u(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),g=Object(r.useCallback)((function(){o(null),f(null),u(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&l){var e=l.getTime()-(new Date).getTime();n=setTimeout(g,e)}else clearTimeout(n)}),[a,g,l]),Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&(o(e.token),f(e.userId))}),[]),{userId:p,token:a,login:h,logout:g}},B=a(10),D=function(){var e,t=I(),a=t.userId,n=t.token,c=t.login,s=t.logout,l=Object(r.useState)(),u=Object(i.a)(l,2),d=u[0],p=u[1];return Object(r.useEffect)((function(){window.localStorage.getItem("darkTheme")?"true"===window.localStorage.getItem("darkTheme")&&p(!0):window.localStorage.setItem("darkTheme","false")}),[]),e=n?o.a.createElement(m.Provider,{value:{dark:d,setDark:p}},o.a.createElement(N,null),o.a.createElement(B.b,{path:"/",exact:!0},o.a.createElement(k,null)),o.a.createElement(B.b,{path:"/settings",exact:!0},o.a.createElement(T,null)),o.a.createElement(B.a,{to:"/"})):o.a.createElement(B.b,{path:"/",exact:!0},o.a.createElement(j,null)),o.a.createElement("div",{className:"App"},o.a.createElement(y.Provider,{value:{isLoggedIn:!!n,token:n,login:c,logout:s,userId:a}},o.a.createElement(O.a,null,o.a.createElement(B.d,null,e))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.ce13cc3d.chunk.js.map