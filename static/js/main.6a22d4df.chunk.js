(this.webpackJsonpstoryboard=this.webpackJsonpstoryboard||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=Object(n.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})},15:function(e,t,a){"use strict";var n=a(0),r=Object(n.createContext)(!1);t.a=r},16:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(27);t.a=function(e){return r.a.createElement(o.SyncLoader,{color:"#ff5555",size:15,loading:e.isLoading})}},19:function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(38),a(23);t.a=function(e){return r.a.createElement("button",{className:"Button ".concat(e.classes),onClick:e.onClick},e.children)}},23:function(e,t,a){},30:function(e,t,a){e.exports=a(70)},35:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(26),c=a.n(l),s=(a(35),a(6)),i=a(8),u=a(14),m=(a(36),a(11)),d=a.n(m),p=a(17),g=a(22),b=(a(23),a(19)),E=a(10),f=a(16),v=(a(63),function(e){return o.a.createElement("div",{className:"ErrorModal"},e.message)}),w=function(){var e=Object(r.useState)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}}),t=Object(s.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!0),c=Object(s.a)(l,2),i=c[0],u=c[1],m=Object(r.useState)(!1),w=Object(s.a)(m,2),h=w[0],k=w[1],O=Object(r.useState)(!0),j=Object(s.a)(O,2),S=j[0],N=j[1],y=function(e){n(Object(g.a)({},a,Object(p.a)({},e.target.name,e.target.value)))},x=Object(r.useContext)(E.a);return o.a.createElement("div",{className:"Login"},h?o.a.createElement(f.a,{loading:!0}):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"Title"},o.a.createElement("h1",null,"StoryBoard"),o.a.createElement("span",{className:"title-decoration-wrapper"},o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}))),o.a.createElement("p",null,"Because keeping track of ideas should be easy."),o.a.createElement("form",{onSubmit:function(e){var t,n,r,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),k(!0),!i){l.next=22;break}return l.prev=3,l.next=6,d.a.awrap(fetch("https://storyboard1.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}));case 6:return t=l.sent,l.next=9,d.a.awrap(t.json());case 9:if(n=l.sent,t.ok){l.next=13;break}throw k(!1),new Error(n.message);case 13:k(!1),x.login(n.userId,n.token),l.next=20;break;case 17:l.prev=17,l.t0=l.catch(3),N(l.t0.message||"Something went wrong!");case 20:l.next=40;break;case 22:return l.prev=22,l.next=25,d.a.awrap(fetch("https://storyboard1.herokuapp.com/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}));case 25:return r=l.sent,l.next=28,d.a.awrap(r.json());case 28:if(o=l.sent,r.ok){l.next=32;break}throw k(!1),new Error(o.message);case 32:k(!1),x.login(o.userId,o.token),l.next=40;break;case 36:l.prev=36,l.t1=l.catch(22),N(l.t1.message||"Something went wrong!"),console.log(l.t1);case 40:case"end":return l.stop()}}),null,null,[[3,17],[22,36]])}},o.a.createElement("span",null,o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",name:"email",placeholder:"jdoe@gmail.com",onChange:y})),o.a.createElement("span",null,o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:y})),o.a.createElement(b.a,{type:"submit"},i?"Login":"Sign up")," "),o.a.createElement(b.a,{type:"button",classes:"LoginBtn LoginBtnAlt",onClick:function(){u(!i)}},i?"Not a user? Sign up!":"Already a user? Login"),S&&o.a.createElement(v,{message:S})))},h=(a(64),a(15)),k=function(){var e=Object(r.useContext)(h.a).dark,t=Object(r.useContext)(E.a).logout;return o.a.createElement("nav",{className:e?"Nav Nav-dark":"Nav"},o.a.createElement("span",{className:"TitleSpan"},o.a.createElement(u.b,{to:"/"},o.a.createElement("h1",null,"StoryBoard")),o.a.createElement("span",{className:"title-decoration-wrapper"},o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}),o.a.createElement("div",{className:"title-decoration"}))),o.a.createElement("ul",{className:"NavList"},o.a.createElement("li",{className:"NavItem"},o.a.createElement(u.b,{to:"/settings"},"Settings")),o.a.createElement("li",{className:"NavItem",onClick:function(e){t()}},"Logout")))},O=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],l=Object(r.useState)(),c=Object(s.a)(l,2),i=c[0],u=c[1],m=Object(r.useState)("5e6017d4a9835a614b38b026"),d=Object(s.a)(m,2),p=d[0],g=d[1],b=Object(r.useCallback)((function(e,t,a){o(t),g(e);var n=a||new Date((new Date).getTime()+36e5);u(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:n.toISOString()}))}),[]),E=Object(r.useCallback)((function(){o(null),g(null),u(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&i){var e=i.getTime()-(new Date).getTime();n=setTimeout(E,e)}else clearTimeout(n)}),[a,E,i]),Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&(o(e.token),g(e.userId))}),[]),{userId:p,token:a,login:b,logout:E}},j=o.a.lazy((function(){return a.e(4).then(a.bind(null,83))})),S=o.a.lazy((function(){return a.e(3).then(a.bind(null,82))})),N=function(){var e,t=O(),a=t.userId,n=t.token,l=t.login,c=t.logout,m=Object(r.useState)(),d=Object(s.a)(m,2),p=d[0],g=d[1];return Object(r.useEffect)((function(){window.localStorage.getItem("darkTheme")?"true"===window.localStorage.getItem("darkTheme")&&g(!0):window.localStorage.setItem("darkTheme","false")}),[]),e=n?o.a.createElement(h.a.Provider,{value:{dark:p,setDark:g}},o.a.createElement(k,null),o.a.createElement(i.b,{path:"/",exact:!0},o.a.createElement(j,null)),o.a.createElement(i.b,{path:"/settings",exact:!0},o.a.createElement(S,null)),o.a.createElement(i.a,{to:"/"})):o.a.createElement(i.b,{path:"/",exact:!0},o.a.createElement(w,null)),o.a.createElement("div",{className:"App"},o.a.createElement(E.a.Provider,{value:{isLoggedIn:!!n,token:n,login:l,logout:c,userId:a}},o.a.createElement(u.a,null,o.a.createElement(i.d,null,o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",{style:{width:"150px",margin:"auto"}},o.a.createElement(f.a,null))},e)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.6a22d4df.chunk.js.map